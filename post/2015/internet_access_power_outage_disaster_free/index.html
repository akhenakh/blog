<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Offering free internet well almost and survive disaster, power outage, Internet blackout &middot; Fabrice Aneche</title>

    <meta name="description" content="">

    <meta name="generator" content="Hugo 0.33" />
    <meta name="twitter:card" content="summary">
    
    <meta name="twitter:title" content="Offering free internet well almost and survive disaster, power outage, Internet blackout &middot; Fabrice Aneche">
    <meta name="twitter:description" content="">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Offering free internet well almost and survive disaster, power outage, Internet blackout &middot; Fabrice Aneche">
    <meta property="og:description" content="">

    <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Oxygen:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css">
    <!--[if lte IE 8]>
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-old-ie-min.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css">
    <!--<![endif]-->

    <link rel="stylesheet" href="https://blog.nobugware.com/css/all.min.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

    <link rel="alternate" type="application/rss+xml" title="Fabrice Aneche" href="https://blog.nobugware.com/index.xml" />
    <link href="https://blog.nobugware.com/css/prism.css" rel="stylesheet" />
</head>
<body>


<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
    <div class="header">
        <hgroup>
            <h1 class="brand-title"><a href="https://blog.nobugware.com">Fabrice Aneche</a></h1>
            <h2 class="brand-tagline"></h2>
        </hgroup>

        <nav class="nav">
            <ul class="nav-list">
                
                <li class="nav-item">
                    <a class="pure-button" href="http://www.nobugware.com"><i class="fa fa-building-o"></i> Hiring</a>
                </li>
                
                
                <li class="nav-item">
                    <a class="pure-button" href="https://twitter.com/akhenakh"><i class="fa fa-twitter"></i> Twitter</a>
                </li>
                
                
                <li class="nav-item">
                    <a class="pure-button" href="https://github.com/akhenakh "><i class="fa fa-github-alt"></i> github</a>
                </li>
                
                <li class="nav-item">
                    <a class="pure-button" href="https://blog.nobugware.com/index.xml"><i class="fa fa-rss"></i> rss</a>
                </li>
            </ul>
        </nav>
    </div>
</div>


    <div class="content pure-u-1 pure-u-md-3-4">
        <div>
            
            <div class="posts">
                <h1 class="content-subhead">02 Aug 2015, 16:26</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://blog.nobugware.com/post/2015/internet_access_power_outage_disaster_free/" class="post-title">Offering free internet well almost and survive disaster, power outage, Internet blackout</a>

                        <p class="post-meta">
                            
                            
                                under 
                                
                                
                            
                        </p>
                    </header>

                    <div class="post-share">
                        <div class="post-share-links">
                            <h4 style="">Share</h4>
                            <a href="#" data-type="facebook" data-url="https://blog.nobugware.com/post/2015/internet_access_power_outage_disaster_free/" data-title="Offering free internet well almost and survive disaster, power outage, Internet blackout" data-description="Offering free internet well almost and survive disaster, power outage, Internet blackout" data-media="" class="prettySocial fa fa-facebook"></a>
                            <a href="#" data-type="googleplus" data-url="https://blog.nobugware.com/post/2015/internet_access_power_outage_disaster_free/" data-description="Offering free internet well almost and survive disaster, power outage, Internet blackout" class="prettySocial fa fa-google-plus"></a>
                            <a href="#" data-type="twitter" data-url="https://blog.nobugware.com/post/2015/internet_access_power_outage_disaster_free/" data-description="Offering free internet well almost and survive disaster, power outage, Internet blackout" data-via="akhenakh" class="prettySocial fa fa-twitter"></a>
                            
                        </div>
                    </div>
                    <div class="post-description">
                        

<p>In my neighborhood, I&rsquo;m experimenting to give free access to some services, not the full internet but a full access to Wikipedia, maps&hellip;<br />
Here are some tips do to the same.</p>

<p>Getting access to the internet may be crucial for our lives, but the commercial providers are here to make money out of it.
They don&rsquo;t event provide disasters nor minimum safety access.</p>

<p>Sometimes even in normal condition, while traveling your roaming will cost you hundreds just to get access to a map or Wikipedia.</p>

<p>With a simple RaspberryPi, a wifi antenna and a good geographical position you can reach hundreds of people.</p>

<h2 id="wifi">Wifi</h2>

<p>To serve wifi to others you need to get a wifi USB dongle that can be set in AP mode.<br />
I&rsquo;m using an Alfa network one.</p>

<p>To enable the AP mode you need to install the package <code>hostapd</code>. Here is my <code>/etc/hostapd/hostapd.conf</code>.</p>

<pre><code>ssid=freewifi
interface=wlan0
auth_algs=3
channel=7
hw_mode=b
logger_stdout=-1
logger_stdout_level=2
country_code=CA
</code></pre>

<p>(Always ensure you are using the correct country to avoid disturbing others and look for a free channel.)</p>

<p>You also need a DNS &amp; DCHP provider, install <code>dnsmasq</code>, my <code>/etc/dnsmasq.conf</code>.</p>

<pre><code>no-resolv
no-poll
server=/localnet/10.4.0.1
address=/#/10.4.0.1
interface=wlan0
bind-interfaces
dhcp-range=10.4.0.10,10.4.0.200,12h
</code></pre>

<p>It means all DNS queries will be intercepted and will respond with the same IP 10.4.0.1, by extend every HTTP request will be redirected to 10.4.0.1.</p>

<p>Enable the same IP on the vlan0 interface.<br />
<code>ifconfig wlan0 10.4.0.1</code></p>

<p>You are all set, no need for NAT no need for routing, we just want to provide access to Wikipedia.</p>

<h2 id="content">Content</h2>

<p>I&rsquo;m using <a href="http://akhenakh.github.io/gozim/">Gozim</a> to run a full offline copy of Wikipedia. (For example, make it listen on port 8080)</p>

<p>Install nginx to reverse proxy to your content to a fake domain call <code>wikipedia.wifi</code> (port 8080) or serve any directories you want to be published.</p>

<h2 id="wispr">Wispr</h2>

<p>Another issue while running your own wifi AP is that these days almost all traffic is secured by HTTPS so there is no way to intercept these calls with the right certificates, the users will just get a security error page.<br />
To solve that you need to display a popup page like the one you get when you connect to a Starbucks free wifi network.</p>

<p>I&rsquo;m working on a set of tool to do just that, uninstall <code>nginx</code> and give it a shot the project is called <a href="http://github.com/akhenakh/wisprgo">WisprGo and the code is on Github too</a>.<br />
It&rsquo;s a work in progress any help is appreciated.</p>

                    </div>
                </section>
            </div>
            <div class="footer">
    <div class="pure-menu pure-menu-horizontal pure-menu-open">
        <ul>
            <li>Powered by <a class="hugo" href="http://hugo.spf13.com/" target="_blank">hugo</a></li>
        </ul>
    </div>
</div>
<script src="https://blog.nobugware.com/js/all.min.js"></script>
        </div>
    </div>
</div>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-1245966-1', 'auto');
ga('send', 'pageview');

</script>

</body>
</html>
