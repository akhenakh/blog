<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Host your blog on Github with autodeploy &middot; Fabrice Aneche</title>

    <meta name="description" content="">

    <meta name="generator" content="Hugo 0.55.3" />
    <meta name="twitter:card" content="summary">
    
    <meta name="twitter:title" content="Host your blog on Github with autodeploy &middot; Fabrice Aneche">
    <meta name="twitter:description" content="">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Host your blog on Github with autodeploy &middot; Fabrice Aneche">
    <meta property="og:description" content="">

    <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Oxygen:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css">
    <!--[if lte IE 8]>
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-old-ie-min.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css">
    <!--<![endif]-->

    <link rel="stylesheet" href="https://blog.nobugware.com/css/all.min.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

    <link rel="alternate" type="application/rss+xml" title="Fabrice Aneche" href="https://blog.nobugware.com/index.xml" />
    <link href="https://blog.nobugware.com/css/prism.css" rel="stylesheet" />
</head>
<body>


<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
    <div class="header">
        <hgroup>
            <h1 class="brand-title"><a href="https://blog.nobugware.com">Fabrice Aneche</a></h1>
            <h2 class="brand-tagline"></h2>
        </hgroup>

        <nav class="nav">
            <ul class="nav-list">
                
                <li class="nav-item">
                    <a class="pure-button" href="http://www.nobugware.com"><i class="fa fa-building-o"></i> Hiring</a>
                </li>
                
                
                <li class="nav-item">
                    <a class="pure-button" href="https://twitter.com/akhenakh"><i class="fa fa-twitter"></i> Twitter</a>
                </li>
                
                
                <li class="nav-item">
                    <a class="pure-button" href="https://github.com/akhenakh "><i class="fa fa-github-alt"></i> github</a>
                </li>
                
                <li class="nav-item">
                    <a class="pure-button" href="https://blog.nobugware.com/index.xml"><i class="fa fa-rss"></i> rss</a>
                </li>
            </ul>
        </nav>
    </div>
</div>


    <div class="content pure-u-1 pure-u-md-3-4">
        <div>
            
            <div class="posts">
                <h1 class="content-subhead">02 Aug 2015, 00:32</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://blog.nobugware.com/post/hugo_blog_github/" class="post-title">Host your blog on Github with autodeploy</a>

                        <p class="post-meta">
                            
                            
                        </p>
                    </header>

                    <div class="post-share">
                        <div class="post-share-links">
                            <h4 style="">Share</h4>
                            <a href="#" data-type="facebook" data-url="https://blog.nobugware.com/post/hugo_blog_github/" data-title="Host your blog on Github with autodeploy" data-description="Host your blog on Github with autodeploy" data-media="" class="prettySocial fa fa-facebook"></a>
                            <a href="#" data-type="googleplus" data-url="https://blog.nobugware.com/post/hugo_blog_github/" data-description="Host your blog on Github with autodeploy" class="prettySocial fa fa-google-plus"></a>
                            <a href="#" data-type="twitter" data-url="https://blog.nobugware.com/post/hugo_blog_github/" data-description="Host your blog on Github with autodeploy" data-via="akhenakh" class="prettySocial fa fa-twitter"></a>
                            
                        </div>
                    </div>
                    <div class="post-description">
                        

<p>I&rsquo;ve always developed my own blog system, that&rsquo;s a good way to learn a new langage.<br />
But having to maintain a working server or hosting is no fun, there are some solutions like <a href="http://jekyllrb.com/">Jekyll</a> or <a href="http://gohugo.io/">Hugo</a> they generate static web pages based on some Markdown files you wrote.</p>

<p>As it&rsquo;s just basic html files, they can be served by Github gh-pages.<br />
It opens the door to blogging from anywhere without internet connection or your own laptop, just write some Markdown then publish to github later or event edit your new blog post from the Github editor.<br />
Coupled with a <a href="http://wercker.com/">Wercker</a> auto deploy, publishing is automated, no excuse anymore.</p>

<p>Here is some tips for this to work smoothly with Hugo.</p>

<h2 id="github-setup">Github setup</h2>

<p>First create 2 repositories on Github, one for the HTML pages, one for the markdown itself.<br />
Let&rsquo;s call them <code>blog</code> &amp; <code>hugo-blog</code>.</p>

<h2 id="dns-setup">DNS setup</h2>

<p>You can use your own domain, if so you need to <a href="https://help.github.com/articles/adding-a-cname-file-to-your-repository/">enable a CNAME file for your gh-pages</a> to the <code>blog</code> repo, then add a CNAME to your DNS provider:<br />
<code>blog.mydomain.com. IN   CNAME   username.github.io.</code></p>

<h2 id="hugo-setup">Hugo setup</h2>

<p>Clone the <code>hugo-blog</code> repo, put your new hugo blog files in it (created via <code>hugo new</code>).<br />
<a href="http://gohugo.io/themes/overview/">Choose a theme for your blog</a> (don&rsquo;t forger to remove the <code>.git</code> directory from it) and set it up in your config.yml as follow:</p>

<pre><code>baseurl = &quot;http://blog.mydomain.com/&quot;
languageCode = &quot;en-us&quot;
title = &quot;My supa blog&quot;
canonifyurls = true
theme = &quot;hyde&quot;
</code></pre>

<p>Then run <code>hugo server --buildDrafts</code>, point your browser to <a href="http://localhost:1313">http://localhost:1313</a>, no need to reload all modifications appear directly.</p>

<h2 id="wercker-setup">Wercker setup</h2>

<p>For the auto deploy to occur after each commits you need a build &amp; deploy system, <a href="http://wercker.com/">Wercker</a> is very cool as you can reproduce the exact same system on your host with Docker, subscribe to the service (it&rsquo;s free) and register your <code>hugo-blog</code> repo, hit next, next &hellip;</p>

<p>Add a <code>wercker.yml</code> file in your <code>hugo-blog</code> that looks exactly like this.</p>

<pre><code>box: debian
build:
  steps:
    - arjen/hugo-build:
        version: &quot;0.14&quot;
        theme: purehugo
        flags: --disableSitemap=true
deploy :
  steps :
    - script:
        name: Configure git
        code: |-
          sudo apt-get -y update
          sudo apt-get -y install git-core
          git config --global user.email &quot;pleasemailus@wercker.com&quot;
          git config --global user.name &quot;wercker&quot;

          # remove current .git folder
          rm -rf .git
    - script:
        name: Deploy to Github pages
        code: |-
          cd public
          # if you are using a custom domain set it here
          echo &quot;blog.mydomain.com&quot; &gt; CNAME
          git init
          git add .
          git commit -m &quot;deploy commit from $WERCKER_STARTED_BY&quot;
          git push -f $GIT_REMOTE master:gh-pages 2&gt; /dev/null
</code></pre>

<p>It will use Hugo to generate the pages then deploy to your Github repo on every commit to the <code>blog</code> repo.</p>

<p>Last step is to get a token from Github for the deploy to occur without your credentials.<br />
Go to your Github settings, Personal access tokens, generate a token.</p>

<p>Go to your <a href="https://app.wercker.com/#applications">Wercker app</a> settings, Deploy targets, add a new target, check <code>auto deploy successful builds to branch(es):</code> and type <code>master</code>.<br />
Add a new variable named <code>GIT_REMOTE</code> check protected and type <code>https://{TOKEN}@github.com/yourusername/blog.git</code> replace <code>{TOKEN}</code> with the token from Github.<br />
You can use this <a href="http://blog.wercker.com/2013/07/25/Using-wercker-to-publish-to-GitHub-pages.html">outdated blogpost from Wercker</a> for the screenshot but don&rsquo;t follow what they said.</p>

<p>You are all set, happy blogging, you can check the exact same config on my repos under my username <a href="http://github.com/akhenakh">Github@akhenakh</a>.</p>

                    </div>
                </section>
            </div>
            <div class="footer">
    <div class="pure-menu pure-menu-horizontal pure-menu-open">
        <ul>
            <li>Powered by <a class="hugo" href="http://hugo.spf13.com/" target="_blank">hugo</a></li>
        </ul>
    </div>
</div>
<script src="https://blog.nobugware.com/js/all.min.js"></script>
        </div>
    </div>
</div>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-1245966-1', 'auto');
ga('send', 'pageview');

</script>

</body>
</html>
