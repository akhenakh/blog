<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.74.2"><title>A geo database for polygons, optimization - Fabrice Aneche</title><meta name=description content="If you read this blog, you know I&rsquo;ve recently released a project called regionagogo, a geo shape lookup database, described in this blogpost.
It uses the current Go S2 implementation, which is not yet as complete as the C++ implementation, for example the region coverer of a shape does not really compute cell around the shape but around the bounding box instead.
Using the shape of the polygon makes the covered cells more precise and smaller, resulting at the end to less PIP tests which are costly."><link rel=stylesheet href=https://blog.nobugware.com/css/ui.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Fira+Mono|Lato|Raleway"></head><body><header class="container no-print"><div class=u-header><nav class=bar><ul><li><a href=https://blog.nobugware.com/><img class=icon-text src=https://blog.nobugware.com/img/prev.svg></a></li><li><a href=https://blog.nobugware.com/about>About</a></li><li><a href=https://blog.nobugware.com/post/>Post</a></li></ul></nav></div></header><main class=container><article><header><hgroup id=brand><h1>A geo database for polygons, optimization</h1><h5><time datetime="2016-03-08 11:23:42 -0500 -0500">Mar 08, 2016</time>
<span class=no-print><span></h5></hgroup><hr class=sep></header><p>If you read this blog, you know I&rsquo;ve recently released a project called <a href=https://github.com/akhenakh/regionagogo>regionagogo</a>, a geo shape lookup database, described in <a href=https://blog.nobugware.com/post/2016/geo_db_s2_region_polygon/>this blogpost</a>.</p><p>It uses the current <a href=https://godoc.org/github.com/golang/geo/s2>Go S2 implementation</a>, which is not yet as complete as the C++ implementation, for example the region coverer of a shape does not really compute cell around the shape but around the bounding box instead.</p><p>Using the shape of the polygon makes the covered cells more precise and smaller, resulting at the end to less <a href=https://en.wikipedia.org/wiki/Point_in_polygon>PIP</a> tests which are costly.</p><p><img src=https://blog.nobugware.com/img/s2cpp.jpg alt="S2 over a shape" title="S2 cover"><br>The same coverage with Go S2 would have returned 8 big cells of the same size, covering over regions.</p><p>I&rsquo;ve created <a href=https://github.com/akhenakh/regionagogogen>regionagogogen</a> a quick and dirty command line program for OSX that takes a GeoJSON file containing your regions and then compute the database using the S2 C++ implementation, it&rsquo;s for OSX only cause I&rsquo;m using ObjC as a bridge to C++ which I don&rsquo;t know enough.</p><p>Also note that <a href=https://github.com/akhenakh/regionagogogen>regionagogogen</a> includes an S2 port that works on iOS/OSX and some ObjC geo helper classes.</p><p>The <a href=https://hub.docker.com/r/akhenakh/regionagogo/>Docker image fore regionagogo</a> is also using the optimized database.</p></article><nav class="no-print post-nav"><a class=prev-post href=https://blog.nobugware.com/post/2016/geo_db_s2_region_polygon/><img class=icon-text src=https://blog.nobugware.com/img/prev.svg>A geo database for polygons, foundations</a>
<a class=next-post href=https://blog.nobugware.com/post/2016/gometalinter_jetbrains_idea/>Enabling Gometalinter with Jetbrains Editors<img class=icon-text src=https://blog.nobugware.com/img/next.svg></a></nav><hr class=sep></main><footer class="container no-print"><div class=u-footer><a href=https://github.com/akhenakh/><img class=icon-social src=https://blog.nobugware.com/img/github.svg alt=Github></a>
<a href=https://twitter.com/akhenakh><img class=icon-social src=https://blog.nobugware.com/img/twitter.svg alt=Twitter></a>
<a href=https://blog.nobugware.com/index.xml target=_blank><img class=icon-social src=https://blog.nobugware.com/img/feed.svg alt=Feed></a><p>Theme used: <a href=https://github.com/yursan9/manis-hugo-theme>Manis</a><br></p><a href=#brand><img class=icon-text src=https://blog.nobugware.com/img/toup.svg alt="To Up">
<span>Back to Up</span></a></div></footer><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-1245966-1','auto');ga('send','pageview');</script></body></html>