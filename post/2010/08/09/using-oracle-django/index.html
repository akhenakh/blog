<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=generator content="Hugo 0.89.4">
<title>Using Oracle with Django - Fabrice Aneche</title>
<meta name=description content="In a production environment you could hit this one: DatabaseError: Invalid handle!
It seems to happen when Oracle is called with OCI interface (cx_Oracle) by multiple threads.
Yes using apache with MPM worker or mod_wsgi, will create threads in the same process, by default cx_Oracle is configured to be used without threads cause it will add a mutex and a performance hit.
The solution is to pass the threaded parameters to the connection string, so in Django settings just add:">
<link rel=stylesheet href=https://blog.nobugware.com/css/ui.css>
<link rel=stylesheet href="https://fonts.googleapis.com/css?family=Fira+Mono|Lato|Raleway">
</head>
<body>
<header class="container no-print">
<div class=u-header>
<nav class=bar>
<ul><li>
<a href=https://blog.nobugware.com/>
<img class=icon-text src=https://blog.nobugware.com/img/prev.svg>
</a>
</li><li><a href=https://blog.nobugware.com/about>About</a></li><li><a href=https://blog.nobugware.com/post/>Post</a></li></ul>
</nav>
</div>
</header>
<main class=container>
<article>
<header><hgroup id=brand>
<h1>Using Oracle with Django</h1>
<h5>
<time datetime="2010-08-09 13:44:52 -0400 -0400">Aug 09, 2010</time>
<span class=no-print>
<span>
</h5>
</hgroup>
<hr class=sep>
</header>
<p>In a production environment you could hit this one: DatabaseError: Invalid
handle!</p>
<p>It seems to happen when Oracle is called with OCI interface (cx_Oracle) by
multiple threads.</p>
<p>Yes using apache with MPM worker or mod_wsgi, will create threads in the same
process, by default cx_Oracle is configured to be used without threads cause
it will add a mutex and a performance hit.</p>
<p>The solution is to pass the threaded parameters to the connection string, so
in Django settings just add:</p>
<pre><code>DATABASE_OPTIONS = {
        'threaded':True
    }
</code></pre>
<p>Here is a bug in the Django documentation to changed it to threaded by default
&mldr; <a href=http://code.djangoproject.com/ticket/13351>13351</a></p>
</article>
<nav class="no-print post-nav">
<a class=prev-post href=https://blog.nobugware.com/post/2010/02/12/nginx-ssl-tomcat-confluence/>
<img class=icon-text src=https://blog.nobugware.com/img/prev.svg>Nginx SSL + Tomcat (for Confluence)</a>
<a class=next-post href=https://blog.nobugware.com/post/2010/08/09/zfs-linux/>ZFS on linux<img class=icon-text src=https://blog.nobugware.com/img/next.svg>
</a>
</nav>
<hr class=sep>
</main>
<footer class="container no-print">
<div class=u-footer>
<a href=https://github.com/akhenakh/><img class=icon-social src=https://blog.nobugware.com/img/github.svg alt=Github></a>
<a href=https://twitter.com/akhenakh><img class=icon-social src=https://blog.nobugware.com/img/twitter.svg alt=Twitter></a>
<a href=https://blog.nobugware.com/index.xml target=_blank><img class=icon-social src=https://blog.nobugware.com/img/feed.svg alt=Feed></a>
<p>
Theme used: <a href=https://github.com/yursan9/manis-hugo-theme>Manis</a><br>
</p>
<a href=#brand>
<img class=icon-text src=https://blog.nobugware.com/img/toup.svg alt="To Up">
<span>Back to Up</span>
</a>
</div>
</footer>
<script>(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)})(window,document,'script','//www.google-analytics.com/analytics.js','ga'),ga('create','UA-1245966-1','auto'),ga('send','pageview')</script>
</body>
</html>